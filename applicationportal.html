<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Portal</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel (for JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-100 font-sans selection:bg-blue-500/30 selection:text-blue-200 overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (SVG Components) ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Send = (props) => <IconBase {...props}><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></IconBase>;
        const User = (props) => <IconBase {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></IconBase>;
        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></IconBase>;
        const GraduationCap = (props) => <IconBase {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"></path><path d="M6 12v5c3 3 9 3 12 0v-5"></path></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17"></path><path d="M14 14.66V17"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path></IconBase>;
        const Briefcase = (props) => <IconBase {...props}><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><polyline points="9 18 15 12 9 6"></polyline></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></IconBase>;
        const Plus = (props) => <IconBase {...props}><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></IconBase>;
        const Trash2 = (props) => <IconBase {...props}><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></IconBase>;

        const ApplicationPortal = () => {
            const PROGRAMS = [
                { id: 'math', name: 'Mathematics', rate: 100 },
                { id: 'reading', name: 'Reading & Literature', rate: 100 },
                { id: 'science', name: 'Science', rate: 100 },
                { id: 'history', name: 'History', rate: 100 },
                { id: 'ls', name: 'Legal Systems', rate: 21 },
                { id: 'eng', name: 'Intro to Engineering', rate: 18 },
                { id: 'business', name: 'Logic & Problem Solving', rate: 40 },
                { id: 'psych', name: 'Intro to Medicine', rate: 28 },
            ];

            const AWARD_LEVELS = ['School', 'Regional', 'State', 'National', 'International'];

            const [activeTab, setActiveTab] = useState(0);
            const [status, setStatus] = useState('idle');
            const [copyFeedback, setCopyFeedback] = useState(false);

            const [formData, setFormData] = useState({
                fullName: '', email: '', phone: '', dob: '', grade: '',
                motivation: '', challenge: '',
                program1: '', program2: '', program3: '',
            });

            const [activities, setActivities] = useState([]);
            const [awards, setAwards] = useState([]);
            const [wordCounts, setWordCounts] = useState({ motivation: 0, challenge: 0 });

            const countWords = (str) => str.trim() === '' ? 0 : str.trim().split(/\s+/).length;

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                if (name === 'motivation' || name === 'challenge') {
                    const limit = name === 'motivation' ? 200 : 400;
                    const count = countWords(value);
                    if (count <= limit) {
                        setFormData(prev => ({ ...prev, [name]: value }));
                        setWordCounts(prev => ({ ...prev, [name]: count }));
                    }
                } else {
                    setFormData(prev => ({ ...prev, [name]: value }));
                }
            };

            const addActivity = () => activities.length < 6 && setActivities([...activities, { rank: activities.length + 1, role: '', hours: '', description: '' }]);
            const updateActivity = (index, field, value) => {
                const newActivities = [...activities];
                newActivities[index][field] = value;
                setActivities(newActivities);
            };
            const removeActivity = (index) => setActivities(activities.filter((_, i) => i !== index).map((act, i) => ({ ...act, rank: i + 1 })));

            const addAward = () => awards.length < 5 && setAwards([...awards, { name: '', level: '', description: '' }]);
            const updateAward = (index, field, value) => {
                const newAwards = [...awards];
                newAwards[index][field] = value;
                setAwards(newAwards);
            };
            const removeAward = (index) => setAwards(awards.filter((_, i) => i !== index));

            const generateFormattedText = () => {
                const formatActivity = (a) => `Rank ${a.rank}: ${a.role} (${a.hours} hrs/wk)\n   ${a.description}`;
                const formatAward = (a) => `${a.name} (${a.level})\n   ${a.description}`;
                
                return `
NAME: ${formData.fullName}
EMAIL: ${formData.email}
DOB: ${formData.dob}
GRADE: ${formData.grade}

--- PROGRAMS ---
1. ${PROGRAMS.find(p => p.id === formData.program1)?.name || formData.program1}
2. ${PROGRAMS.find(p => p.id === formData.program2)?.name || formData.program2}
3. ${PROGRAMS.find(p => p.id === formData.program3)?.name || formData.program3}

--- ACTIVITIES ---
${activities.map(formatActivity).join('\n\n')}

--- AWARDS ---
${awards.map(formatAward).join('\n\n')}

--- ESSAY 1 (Why do you want to join this program?) ---
${formData.motivation}

--- ESSAY 2 (Challenge) ---
${formData.challenge}
                `.trim();
            };

            const handleManualCopy = () => {
                const text = generateFormattedText();
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    setCopyFeedback(true);
                    setTimeout(() => setCopyFeedback(false), 2000);
                } catch (err) {
                    console.error('Fallback copy failed', err);
                }
                document.body.removeChild(textArea);
            };

            const isPersonalValid = () => formData.fullName && formData.email && formData.dob && formData.grade;
            const isActivitiesValid = () => {
                const actsValid = activities.every(a => a.role && a.hours && a.description);
                const awardsValid = awards.every(a => a.name && a.level && a.description);
                return actsValid && awardsValid;
            };
            const isEssaysValid = () => formData.motivation && formData.challenge;
            const isPreferencesValid = () => formData.program1 && formData.program2 && formData.program3 && 
                (formData.program1 !== formData.program2) && (formData.program1 !== formData.program3) && (formData.program2 !== formData.program3);

            const steps = [
                { title: "Personal Info", icon: <User size={20} />, isValid: isPersonalValid() },
                { title: "Activities & Awards", icon: <Trophy size={20} />, isValid: isActivitiesValid() },
                { title: "The Essays", icon: <BookOpen size={20} />, isValid: isEssaysValid() },
                { title: "Preferences", icon: <GraduationCap size={20} />, isValid: isPreferencesValid() }
            ];

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!isPreferencesValid()) return;
                setStatus('submitting');
                setTimeout(() => {
                    setStatus('success');
                    const subject = `New Application: ${formData.fullName}`;
                    const body = generateFormattedText();
                    window.location.href = `mailto:business.adikamath@gmail.com, eastsidescholars@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                }, 1000);
            };

            return (
                <div className="min-h-screen w-full relative bg-slate-950">
                    <div className="fixed inset-0 -z-10">
                        <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full bg-blue-900/20 blur-[120px] animate-pulse"></div>
                        <div className="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full bg-indigo-900/20 blur-[120px] animate-pulse delay-1000"></div>
                        <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-[0.03]"></div>
                    </div>

                    <div className="container mx-auto px-4 py-8 md:py-16 max-w-6xl">
                        <div className="text-center mb-12">
                            <h1 className="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-400 mb-4 tracking-tight">Program Application</h1>
                            <p className="text-slate-400 text-lg font-light">Define your future. Share your journey.</p>
                        </div>

                        <div className="backdrop-blur-2xl bg-slate-900/60 border border-white/10 shadow-2xl rounded-3xl overflow-hidden flex flex-col md:flex-row min-h-[700px] relative">
                            <div className="hidden md:flex flex-col w-72 bg-slate-950/50 border-r border-white/5 p-8">
                                <div className="space-y-6">
                                    {steps.map((step, index) => (
                                        <div key={index} className="relative">
                                            <button disabled={index > activeTab && !steps[index-1]?.isValid} onClick={() => setActiveTab(index)}
                                                className={`flex items-center space-x-4 w-full text-left transition-all duration-300 group ${activeTab === index ? 'opacity-100 translate-x-2' : 'opacity-40 hover:opacity-70'}`}>
                                                <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg transition-all duration-300 ${activeTab === index ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400 group-hover:bg-slate-700'}`}>
                                                    {activeTab > index ? <CheckCircle size={22} className="text-emerald-400" /> : step.icon}
                                                </div>
                                                <div>
                                                    <p className={`text-[10px] uppercase tracking-widest font-bold mb-1 ${activeTab === index ? 'text-blue-400' : 'text-slate-500'}`}>Step 0{index + 1}</p>
                                                    <p className={`font-medium text-sm ${activeTab === index ? 'text-white' : 'text-slate-400'}`}>{step.title}</p>
                                                </div>
                                            </button>
                                            {index !== steps.length - 1 && <div className={`absolute left-6 top-14 bottom-[-18px] w-px ${index < activeTab ? 'bg-blue-900' : 'bg-slate-800'}`}></div>}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="flex-1 p-6 md:p-12 overflow-y-auto relative scrollbar-thin scrollbar-thumb-slate-700">
                                <form onSubmit={handleSubmit} className="space-y-8 max-w-3xl mx-auto pb-32">
                                    
                                    {activeTab === 0 && (
                                        <div className="animate-in fade-in slide-in-from-right-8 duration-500 space-y-8">
                                            <div className="border-b border-white/10 pb-4"><h2 className="text-3xl font-bold text-white">Personal Details</h2></div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <input required name="fullName" value={formData.fullName} onChange={handleInputChange} className="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3" placeholder="Full Name" />
                                                <input required type="email" name="email" value={formData.email} onChange={handleInputChange} className="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3" placeholder="Email Address" />
                                                <input required type="date" name="dob" value={formData.dob} onChange={handleInputChange} className="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3" />
                                                <input required name="grade" value={formData.grade} onChange={handleInputChange} className="w-full bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-3" placeholder="Current Grade" />
                                            </div>
                                        </div>
                                    )}

                                    {activeTab === 1 && (
                                        <div className="animate-in fade-in slide-in-from-right-8 duration-500 space-y-10">
                                            <div className="border-b border-white/10 pb-4"><h2 className="text-3xl font-bold text-white">Activities & Awards</h2></div>
                                            <div className="space-y-6">
                                                <div className="flex justify-between items-center">
                                                    <h3 className="text-xl font-semibold flex items-center gap-2"><Briefcase size={20} className="text-blue-400" /> Activities</h3>
                                                    {activities.length < 6 && <button type="button" onClick={addActivity} className="text-xs bg-blue-600/20 text-blue-300 px-3 py-1.5 rounded-lg border border-blue-500/30">+ Add</button>}
                                                </div>
                                                {activities.map((act, idx) => (
                                                    <div key={idx} className="bg-slate-800/40 border border-white/5 rounded-xl p-5 relative">
                                                        <button type="button" onClick={() => removeActivity(idx)} className="absolute top-4 right-4 text-slate-600 hover:text-red-400 transition-colors"><Trash2 size={16} /></button>
                                                        <div className="grid grid-cols-12 gap-4 mb-3">
                                                            <div className="col-span-8"><input value={act.role} onChange={(e) => updateActivity(idx, 'role', e.target.value)} className="w-full bg-transparent border-b border-slate-700 py-1 text-sm" placeholder="Role/Position" /></div>
                                                            <div className="col-span-4"><input type="number" value={act.hours} onChange={(e) => updateActivity(idx, 'hours', e.target.value)} className="w-full bg-transparent border-b border-slate-700 py-1 text-sm" placeholder="Hrs/Wk" /></div>
                                                        </div>
                                                        <textarea rows="2" value={act.description} onChange={(e) => updateActivity(idx, 'description', e.target.value)} className="w-full bg-slate-900/50 rounded-lg p-2 text-sm mt-1" placeholder="Description..." />
                                                    </div>
                                                ))}
                                            </div>
                                            <div className="space-y-6 pt-6 border-t border-white/10">
                                                <div className="flex justify-between items-center">
                                                    <h3 className="text-xl font-semibold flex items-center gap-2"><Trophy size={20} className="text-amber-400" /> Awards</h3>
                                                    {awards.length < 5 && <button type="button" onClick={addAward} className="text-xs bg-amber-600/20 text-amber-300 px-3 py-1.5 rounded-lg border border-amber-500/30">+ Add</button>}
                                                </div>
                                                {awards.map((award, idx) => (
                                                    <div key={idx} className="bg-slate-800/40 border border-white/5 rounded-xl p-5 relative">
                                                        <button type="button" onClick={() => removeAward(idx)} className="absolute top-4 right-4 text-slate-600 hover:text-red-400 transition-colors"><Trash2 size={16} /></button>
                                                        <div className="grid grid-cols-2 gap-4 mb-3">
                                                            <input value={award.name} onChange={(e) => updateAward(idx, 'name', e.target.value)} className="w-full bg-transparent border-b border-slate-700 py-1 text-sm" placeholder="Award Name" />
                                                            <select value={award.level} onChange={(e) => updateAward(idx, 'level', e.target.value)} className="bg-slate-900 border-b border-slate-700 py-1 text-sm">
                                                                <option value="" disabled>Select Level</option>
                                                                {AWARD_LEVELS.map(l => <option key={l} value={l}>{l}</option>)}
                                                            </select>
                                                        </div>
                                                        <textarea rows="2" value={award.description} onChange={(e) => updateAward(idx, 'description', e.target.value)} className="w-full bg-slate-900/50 rounded-lg p-2 text-sm mt-1" placeholder="Description..." />
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}

                                    {activeTab === 2 && (
                                        <div className="animate-in fade-in slide-in-from-right-8 duration-500 space-y-8">
                                            <div className="border-b border-white/10 pb-4"><h2 className="text-3xl font-bold text-white">The Essays</h2></div>
                                            <div className="space-y-4">
                                                <div className="flex justify-between text-sm"><label className="font-bold text-blue-300">1. Motivation</label><span className="text-slate-500">{wordCounts.motivation}/200</span></div>
                                                <textarea required name="motivation" value={formData.motivation} onChange={handleInputChange} rows="6" className="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-4 text-slate-200" placeholder="Why join us?" />
                                            </div>
                                            <div className="space-y-4">
                                                <div className="flex justify-between text-sm"><label className="font-bold text-blue-300">2. Personal Challenge</label><span className="text-slate-500">{wordCounts.challenge}/400</span></div>
                                                <textarea required name="challenge" value={formData.challenge} onChange={handleInputChange} rows="10" className="w-full bg-slate-900/50 border border-slate-700 rounded-xl p-4 text-slate-200" placeholder="Tell us about a challenge..." />
                                            </div>
                                        </div>
                                    )}

                                    {activeTab === 3 && (
                                        <div className="animate-in fade-in slide-in-from-right-8 duration-500 space-y-8">
                                            <div className="border-b border-white/10 pb-4"><h2 className="text-3xl font-bold text-white">Preferences</h2></div>
                                            <div className="bg-blue-900/20 rounded-2xl p-6 border border-blue-500/20 space-y-4">
                                                {['program1', 'program2', 'program3'].map((field, idx) => (
                                                    <div key={field} className="flex items-center gap-4">
                                                        <div className="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center font-bold text-sm">{idx + 1}</div>
                                                        <select name={field} value={formData[field]} onChange={handleInputChange} className="flex-1 bg-slate-950 border border-slate-700 rounded-xl p-3 text-white">
                                                            <option value="" disabled>Select program</option>
                                                            {PROGRAMS.map(p => {
                                                                const isUsed = [formData.program1, formData.program2, formData.program3].includes(p.id) && formData[field] !== p.id;
                                                                return isUsed ? null : <option key={p.id} value={p.id}>{p.name} ({p.rate}%)</option>
                                                            })}
                                                        </select>
                                                    </div>
                                                ))}
                                            </div>

                                            {/* Manual Submission Block */}
                                            <div className="bg-slate-800/50 border border-slate-700 rounded-2xl p-6 space-y-4">
                                                <div className="flex items-start gap-4">
                                                    <div className="bg-blue-500/20 p-2 rounded-lg text-blue-400 mt-1"><AlertCircle size={20} /></div>
                                                    <div className="space-y-2">
                                                        <h4 className="font-bold text-white">Manual Submission</h4>
                                                        <p className="text-sm text-slate-400">
                                                            If the "Submit" button above doesn't open your email app, please manually copy your application and email it to: 
                                                            <span className="text-blue-400 font-mono ml-1">business.adikamath@gmail.com</span>
                                                        </p>
                                                        <button type="button" onClick={handleManualCopy} className="mt-2 flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-white text-xs px-4 py-2 rounded-lg transition-colors">
                                                            <Copy size={14} /> {copyFeedback ? 'Copied to Clipboard!' : 'Copy Formatted Application'}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    <div className="fixed bottom-0 left-0 md:absolute md:bottom-8 md:right-8 md:left-auto right-0 p-4 md:p-0 bg-slate-950/80 md:bg-transparent backdrop-blur-md z-20 flex justify-between gap-4 w-full md:w-auto">
                                        {activeTab > 0 && <button type="button" onClick={() => setActiveTab(prev => prev - 1)} className="px-6 py-3 rounded-xl bg-slate-800 text-slate-400">Back</button>}
                                        {activeTab < steps.length - 1 ? (
                                            <button type="button" onClick={() => setActiveTab(prev => prev + 1)} disabled={!steps[activeTab].isValid} className={`px-8 py-3 rounded-xl font-bold flex items-center gap-2 ${steps[activeTab].isValid ? 'bg-blue-600' : 'bg-slate-800 text-slate-500 opacity-50'}`}>Next Step <ChevronRight size={18} /></button>
                                        ) : (
                                            <button type="submit" disabled={!steps[activeTab].isValid} className={`px-10 py-3 rounded-xl font-bold flex items-center gap-2 ${steps[activeTab].isValid ? 'bg-gradient-to-r from-blue-600 to-cyan-500' : 'bg-slate-800 text-slate-500'}`}>Submit Application <Send size={18} /></button>
                                        )}
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    {status === 'success' && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-black/80 backdrop-blur-sm" onClick={() => setStatus('idle')}></div>
                            <div className="bg-slate-900 border border-white/10 rounded-3xl p-8 max-w-md w-full relative z-10 text-center shadow-2xl">
                                <CheckCircle size={48} className="text-green-400 mx-auto mb-4" />
                                <h3 className="text-2xl font-bold text-white mb-2">Ready to Send!</h3>
                                <p className="text-slate-400 mb-6">Your email client should have opened. If not, use the manual "Copy Formatted Application" button on the Preferences tab.</p>
                                <button onClick={() => setStatus('idle')} className="w-full bg-slate-800 py-3 rounded-xl">Close</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<ApplicationPortal />);
    </script>
</body>
</html>
